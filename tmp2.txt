        <div class="glass-info-card rounded-lg p-4">
          <h5 class="font-semibold text-purple-600 mb-3">Últimos Movimientos</h5>
          <div class="space-y-2 max-h-40 overflow-y-auto">
            <div v-for="movimiento in ultimosMovimientosDonEduardo" :key="movimiento.id" 
                 class="flex justify-between items-center py-2 border-b border-gray-300 last:border-b-0">
              <div>
                <p class="text-sm font-medium text-gray-800">{{ movimiento.descripcion }}</p>
                <p class="text-xs text-gray-600">{{ formatearFecha(movimiento.fecha) }}</p>
              </div>
              <p class="font-semibold" :class="movimiento.monto >= 0 ? 'text-emerald-600' : 'text-red-600'">
                {{ movimiento.monto >= 0 ? '+' : '' }}{{ formatearDinero(movimiento.monto) }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Control Préstamo Q3,700 -->
      <div class="glass-card-premium p-4 md:p-6">
        <h3 class="text-heading-4 text-warning mb-4 flex items-center justify-center sm:justify-between">
          <div class="flex items-center">
            <Calculator :size="20" class="mr-2" />
            <span class="hidden sm:inline">Préstamo Principal</span>
            <span class="sm:hidden">Préstamo</span>
          </div>
          <span class="text-body-small bg-orange-900/30 px-2 py-1 rounded-full text-orange-400">
            {{ ((pagosPrestamo / 36) * 100).toFixed(0) }}%
          </span>
        </h3>
        
        <div class="space-y-3 md:space-y-4">
          <!-- Información principal del préstamo - Móvil optimizado -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div class="text-center glass-info-card rounded-lg p-4">
              <p class="text-xl md:text-2xl font-bold text-orange-400">{{ formatearDinero(montoPagoPrestamo) }}</p>
              <p class="text-body-small text-orange-700">Pago mensual</p>
            </div>
            <div class="text-center glass-info-card rounded-lg p-4">
              <p class="text-xl md:text-2xl font-bold text-cyan-400">{{ formatearDinero(montoTotalPrestamo) }}</p>
              <p class="text-body-small text-cyan-700">Total préstamo</p>
            </div>
          </div>

          <!-- Progreso detallado - Móvil optimizado -->
          <div class="glass-info-card rounded-lg p-4">
            <div class="flex justify-between items-center mb-3">
              <span class="text-body-small text-white">Progreso</span>
              <span class="text-body-small font-semibold text-orange-300 bg-orange-900/30 px-2 py-1 rounded-full">
                {{ pagosPrestamo }}/36
              </span>
            </div>
            
            <!-- Barra de progreso mejorada -->
            <div class="w-full bg-orange-900/20 rounded-full h-3 mb-4 overflow-hidden">
              <div class="bg-gradient-to-r from-orange-500 to-orange-400 h-3 rounded-full transition-all duration-700 relative" 
                   :style="{ width: `${(pagosPrestamo / 36) * 100}%` }">
                <div class="absolute inset-0 bg-white/20 animate-pulse"></div>
              </div>
            </div>
            
            <!-- Grid responsive para móvil -->
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
              <div class="flex justify-between sm:flex-col sm:items-center bg-orange-900/20 rounded-lg p-2">
                <span class="text-body-small text-orange-700">Restantes</span>
                <span class="text-orange-300 font-semibold">{{ 36 - pagosPrestamo }}</span>
              </div>
              <div class="flex justify-between sm:flex-col sm:items-center bg-emerald-900/20 rounded-lg p-2">
                <span class="text-body-small text-emerald-700">Pagado</span>
                <span class="text-emerald-600 font-semibold text-sm">{{ formatearDinero(pagosPrestamo * montoPagoPrestamo) }}</span>
              </div>
              <div class="flex justify-between sm:flex-col sm:items-center bg-red-900/20 rounded-lg p-2">
                <span class="text-body-small text-red-700">Faltante</span>
                <span class="text-red-400 font-semibold text-sm">{{ formatearDinero((36 - pagosPrestamo) * montoPagoPrestamo) }}</span>
              </div>
            </div>
          </div>

          <!-- Botón de acción móvil-first -->
          <button @click="registrarPagoPrestamo" 
                  :disabled="pagosPrestamo >= 36"
                  class="w-full btn-theme-primary tech-btn relative overflow-hidden min-h-[48px] text-body font-semibold"
                  :class="{'opacity-50 cursor-not-allowed': pagosPrestamo >= 36}">
            <span class="z-10 relative flex items-center justify-center gap-2">
              <DollarSign :size="20" />
              <span class="hidden sm:inline">
                {{ pagosPrestamo >= 36 ? 'Préstamo Completado' : `Registrar Pago ${pagosPrestamo + 1}/36` }}
              </span>
              <span class="sm:hidden">
                {{ pagosPrestamo >= 36 ? 'Completado' : `Pago ${pagosPrestamo + 1}` }}
              </span>
            </span>
            <span class="tech-btn-bg absolute inset-0"></span>
          </button>
        </div>
      </div>
    </div>

    <!-- Resumen Financiero Detallado -->
    <div class="financial-summary-section mb-8">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-gn-primary-200 flex items-center">
          <TrendingUp :size="24" class="mr-2" />
          Análisis Financiero
        </h3>
        <div class="text-xs text-emerald-700 glass-info-card px-3 py-1 rounded-full">
          Último actualizado: {{ formatearFecha(new Date()) }}
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
        <div class="glass-card-premium border-l-4 border-emerald-500">
          <div class="flex items-center justify-between mb-2">
            <h4 class="font-bold text-lg text-emerald-800">Ingresos Cobrados</h4>
            <div class="p-2 bg-emerald-500/20 rounded-lg">
              <TrendingUp :size="16" class="text-emerald-600" />
            </div>
          </div>
          <p class="text-2xl font-bold text-emerald-600 mb-2">{{ formatearDinero(ingresosCobrados) }}</p>
          <div class="flex justify-between items-center">
            <p class="text-sm text-emerald-700">Del período actual</p>
            <div class="text-xs bg-emerald-900/30 text-emerald-600 px-2 py-1 rounded">
              +{{ ((ingresosCobrados / (ingresosCobrados + ingresosPorCobrar)) * 100).toFixed(0) }}% efectividad
            </div>
          </div>
        </div>

        <div class="glass-card-premium border-l-4 border-purple-500">
          <div class="flex items-center justify-between mb-2">
            <h4 class="font-bold text-lg text-purple-800">Por Cobrar</h4>
            <div class="p-2 bg-purple-500/20 rounded-lg">
              <Clock :size="16" class="text-purple-400" />
            </div>
          </div>
          <p class="text-2xl font-bold text-purple-400 mb-2">{{ formatearDinero(ingresosPorCobrar) }}</p>
          <div class="flex justify-between items-center">
            <p class="text-sm text-purple-700">Facturado + Vencido</p>
            <div class="text-xs bg-purple-900/30 text-purple-600 px-2 py-1 rounded">
              {{ ((ingresosPorCobrar / (ingresosCobrados + ingresosPorCobrar)) * 100).toFixed(0) }}% pendiente
            </div>
          </div>
        </div>

        <div class="glass-card-premium border-l-4 border-red-500">
          <div class="flex items-center justify-between mb-2">
            <h4 class="font-bold text-lg text-red-800">Gastos Totales</h4>
            <div class="p-2 bg-red-500/20 rounded-lg">
              <TrendingDown :size="16" class="text-red-400" />
            </div>
          </div>
          <p class="text-2xl font-bold text-red-400 mb-2">{{ formatearDinero(gastosTotales) }}</p>
          <div class="flex justify-between items-center">
            <p class="text-sm text-red-700">Incluye préstamos</p>
            <div class="text-xs bg-red-900/30 text-red-300 px-2 py-1 rounded">
              {{ gastosTotales > ingresosCobrados ? 'Alerta' : 'Normal' }}
            </div>
          </div>
        </div>

        <div class="glass-card-premium border-l-4 border-cyan-500">
          <div class="flex items-center justify-between mb-2">
            <h4 class="font-bold text-lg text-cyan-800">Flujo Neto</h4>
            <div class="p-2 rounded-lg" :class="flujoNeto >= 0 ? 'bg-cyan-500/20' : 'bg-red-500/20'">
              <component :is="flujoNeto >= 0 ? 'TrendingUp' : 'TrendingDown'" :size="16" :class="flujoNeto >= 0 ? 'text-cyan-400' : 'text-red-400'" />
            </div>
          </div>
          <p class="text-2xl font-bold mb-2" :class="flujoNeto >= 0 ? 'text-cyan-400' : 'text-red-400'">
            {{ formatearDinero(Math.abs(flujoNeto)) }}
          </p>
          <div class="flex justify-between items-center">
            <p class="text-sm text-cyan-700">Este período</p>
            <div class="text-xs px-2 py-1 rounded" 
                 :class="flujoNeto >= 0 ? 'bg-cyan-900/30 text-cyan-600' : 'bg-red-900/30 text-red-300'">
              {{ flujoNeto >= 0 ? 'Positivo' : 'Negativo' }}
            </div>
          </div>
        </div>
      </div>

      <!-- Performance Insights -->
      <div class="performance-insights glass-card-premium rounded-2xl p-6">
        <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
          <BarChart3 :size="20" class="mr-2" />
          Indicadores de Performance
        </h4>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="performance-metric">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm text-white">Ratio Cobros</span>
              <span class="text-xs text-emerald-600">{{ ((ingresosCobrados / (ingresosCobrados + ingresosPorCobrar)) * 100).toFixed(0) }}%</span>
            </div>
            <div class="w-full bg-emerald-900/30 rounded-full h-2">
              <div class="bg-emerald-500 h-2 rounded-full" 
                   :style="{ width: ((ingresosCobrados / (ingresosCobrados + ingresosPorCobrar)) * 100) + '%' }"></div>
            </div>
          </div>

          <div class="performance-metric">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm text-white">Eficiencia</span>
              <span class="text-xs text-cyan-400">{{ flujoNeto >= 0 ? ((flujoNeto / ingresosCobrados) * 100).toFixed(0) : '0' }}%</span>
            </div>
            <div class="w-full bg-emerald-900/30 rounded-full h-2">
              <div class="bg-cyan-400 h-2 rounded-full" 
                   :style="{ width: (flujoNeto >= 0 ? ((flujoNeto / ingresosCobrados) * 100) : 0) + '%' }"></div>
            </div>
          </div>

          <div class="performance-metric">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm text-white">Control Gastos</span>
              <span class="text-xs" :class="gastosTotales <= (ingresosCobrados * 0.7) ? 'text-emerald-600' : 'text-red-400'">
                {{ ((gastosTotales / ingresosCobrados) * 100).toFixed(0) }}%
              </span>
            </div>
            <div class="w-full bg-emerald-900/30 rounded-full h-2">
              <div class="h-2 rounded-full" 
                   :class="gastosTotales <= (ingresosCobrados * 0.7) ? 'bg-emerald-500' : 'bg-red-400'"
                   :style="{ width: Math.min(((gastosTotales / ingresosCobrados) * 100), 100) + '%' }"></div>
            </div>
          </div>

          <div class="performance-metric">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm text-white">Liquidez</span>
              <span class="text-xs text-purple-400">{{ ((Math.max(0, limiteCredito - saldoDonEduardo) / 1000)).toFixed(0) }}K</span>
            </div>
            <div class="w-full bg-emerald-900/30 rounded-full h-2">
              <div class="bg-purple-400 h-2 rounded-full" 
                   :style="{ width: Math.min(((Math.max(0, limiteCredito - saldoDonEduardo) / limiteCredito) * 100), 100) + '%' }"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sección de Gráficas -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8">
      <!-- Gráfica Don Eduardo -->
      <div class="glass-card-premium rounded-2xl p-4 md:p-6">
        <h3 class="text-base md:text-lg font-semibold text-purple-600 mb-3 md:mb-4 flex items-center">
          <TrendingUp :size="18" class="mr-2 md:mr-2" />
          <span class="hidden sm:inline">Evolución Don Eduardo</span>
          <span class="sm:hidden">Don Eduardo</span>
        </h3>
        <div class="h-48 md:h-64">
          <Line v-if="chartDonEduardoData" :data="chartDonEduardoData" :options="chartOptions" />
        </div>
      </div>

