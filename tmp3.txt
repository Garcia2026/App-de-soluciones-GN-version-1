      <!-- Gr√°fica Pr√©stamo -->
      <div class="glass-card-premium rounded-2xl p-4 md:p-6">
        <h3 class="text-base md:text-lg font-semibold text-orange-600 mb-3 md:mb-4 flex items-center">
          <PieChart :size="18" class="mr-2" />
          <span class="hidden sm:inline">Progreso del Pr√©stamo</span>
          <span class="sm:hidden">Pr√©stamo</span>
        </h3>
        <div class="h-48 md:h-64 flex items-center justify-center">
          <Doughnut v-if="chartPrestamoData" :data="chartPrestamoData" :options="doughnutOptions" />
        </div>
      </div>

      <!-- Gr√°fica Top Gastos -->
      <div class="glass-card-premium rounded-2xl p-4 md:p-6">
        <h3 class="text-base md:text-lg font-semibold text-emerald-600 mb-3 md:mb-4 flex items-center">
          <BarChart3 :size="18" class="mr-2" />
          <span class="hidden sm:inline">Top Gastos por Categor√≠a</span>
          <span class="sm:hidden">Top Gastos</span>
        </h3>
        <div class="h-48 md:h-64">
          <Bar v-if="chartGastosData" :data="chartGastosData" :options="barOptions" />
        </div>
      </div>
    </div>

    <!-- Registro de Movimientos -->
    <div class="glass-card-premium rounded-2xl p-4 md:p-6 mb-6 md:mb-8">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-3 md:gap-4 mb-4 md:mb-6">
        <h3 class="text-lg md:text-xl font-semibold text-emerald-600">Registro de Movimientos</h3>
        <div class="flex flex-wrap gap-2 md:gap-3 w-full md:w-auto">
          <button @click="abrirModalMovimiento('ingreso')" class="btn-primary tech-btn relative overflow-hidden flex-1 md:flex-none">
            <span class="z-10 relative flex items-center justify-center">
              <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
              <span class="text-sm md:text-base">Ingreso</span>
            </span>
            <span class="tech-btn-bg absolute inset-0"></span>
          </button>
          <button @click="abrirModalMovimiento('gasto')" class="btn-secondary tech-btn relative overflow-hidden flex-1 md:flex-none">
            <span class="z-10 relative flex items-center justify-center">
              <TrendingUp :size="14" class="mr-1 md:mr-1.5 rotate-180 md:w-4 md:h-4" />
              <span class="text-sm md:text-base">Gasto</span>
            </span>
            <span class="tech-btn-bg absolute inset-0"></span>
          </button>
        </div>
      </div>

      <!-- Tabla de Movimientos -->
      <div class="overflow-x-auto rounded-lg">
        <table class="min-w-full divide-y divide-blue-700/50">
          <thead class="bg-gradient-to-r from-blue-600 to-blue-700">
            <tr>
              <th class="px-2 md:px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider drop-shadow-sm w-20 md:w-auto">Fecha</th>
              <th class="px-2 md:px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider drop-shadow-sm min-w-[120px]">Descripci√≥n</th>
              <th class="px-2 md:px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider drop-shadow-sm hidden sm:table-cell">Categor√≠a</th>
              <th class="px-2 md:px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider drop-shadow-sm w-24 md:w-auto">Monto</th>
              <th class="px-2 md:px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider drop-shadow-sm hidden lg:table-cell w-20">Tipo</th>
              <th class="px-2 md:px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider drop-shadow-sm w-20 md:w-24">Acciones</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-blue-700/30">
            <tr v-for="movimiento in movimientosRecientes" :key="movimiento.id" 
                class="bg-slate-800/60 hover:bg-blue-600/30 transition-colors border-b border-slate-700/30">
              <td class="px-2 md:px-4 py-3 text-xs md:text-sm text-gray-200">
                <div class="truncate">{{ formatearFecha(movimiento.fecha) }}</div>
              </td>
              <td class="px-2 md:px-4 py-3 text-xs md:text-sm text-gray-200">
                <div class="flex items-center min-w-0">
                  <span class="text-base md:text-lg mr-1 md:mr-2 flex-shrink-0">{{ getCategoriaIcono(movimiento.categoria) }}</span>
                  <div class="min-w-0">
                    <div class="truncate max-w-[100px] md:max-w-xs">{{ movimiento.descripcion }}</div>
                    <div class="sm:hidden text-xs text-gray-400 truncate">{{ movimiento.categoria }}</div>
                  </div>
                </div>
              </td>
              <td class="px-2 md:px-4 py-3 hidden sm:table-cell">
                <span class="px-2 py-1 text-xs rounded-full flex items-center" 
                      :class="getCategoriaColor(movimiento.categoria)">
                  {{ movimiento.categoria }}
                </span>
              </td>
              <td class="px-2 md:px-4 py-3 text-xs md:text-sm font-semibold text-right" 
                  :class="movimiento.tipo === 'ingreso' ? 'text-emerald-600' : 'text-red-400'">
                <div class="flex flex-col items-end">
                  <span>{{ movimiento.tipo === 'ingreso' ? '+' : '-' }}{{ formatearDinero(Math.abs(movimiento.monto)) }}</span>
                  <span class="lg:hidden text-xs" 
                        :class="movimiento.tipo === 'ingreso' ? 'text-emerald-500' : 'text-red-300'">
                    {{ movimiento.tipo === 'ingreso' ? 'Ingreso' : 'Gasto' }}
                  </span>
                </div>
              </td>
              <td class="px-2 md:px-4 py-3 hidden lg:table-cell">
                <span class="px-2 py-1 text-xs rounded-full" 
                      :class="movimiento.tipo === 'ingreso' ? 'bg-emerald-900/30 text-emerald-600' : 'bg-red-900/30 text-red-400'">
                  {{ movimiento.tipo === 'ingreso' ? 'üìà Ingreso' : 'üìâ Gasto' }}
                </span>
              </td>
              <td class="px-2 md:px-4 py-3">
                <div class="flex space-x-1 justify-center md:justify-start">
                  <button @click="verDetalles(movimiento)" 
                          class="text-blue-400 hover:text-blue-300 transition-colors p-1.5 md:p-2 rounded bg-blue-900/20 hover:bg-blue-900/40 text-sm"
                          title="Ver detalles">
                    üëÅÔ∏è
                  </button>
                  <!-- Bot√≥n editar -->
                  <button @click="editarMovimiento(movimiento)" 
                          class="text-yellow-400 hover:text-yellow-300 transition-colors p-1.5 md:p-2 rounded bg-yellow-900/20 hover:bg-yellow-900/40 text-sm"
                          title="Editar">
                    ‚úèÔ∏è
                  </button>
                  <!-- Bot√≥n eliminar -->
                  <button @click="confirmarEliminar(movimiento)" 
                          class="text-red-400 hover:text-red-300 transition-colors p-1.5 md:p-2 rounded bg-red-900/20 hover:bg-red-900/40 text-sm"
                          title="Eliminar">
                    üóëÔ∏è
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal Don Eduardo -->
    <Transition name="modal-fade">
      <div v-if="mostrarModalDonEduardo" class="modal-backdrop">
        <div class="modal-content max-w-md">
          <div class="modal-header">
            <h3 class="modal-title">Movimiento Don Eduardo</h3>
            <button @click="cerrarModalDonEduardo" class="modal-close-btn">&times;</button>
          </div>
          <form @submit.prevent="registrarMovimientoDonEduardo" class="p-6">
            <div class="mb-4">
              <label class="label-form">Tipo de Movimiento</label>
              <select v-model="formDonEduardo.tipo" class="input-primary select-input" required>
                <option value="">Seleccionar tipo de movimiento...</option>
                <option value="prestamo">üí∞ Dinero prestado por Don Eduardo (+deuda)</option>
                <option value="pago_recibido">üì• Pago recibido y enviado a Don Eduardo (-deuda)</option>
                <option value="pago_eduardo">üí∏ Pago directo a Don Eduardo (-deuda)</option>
                <option value="intereses">üéØ Inter√©s agregado al saldo (-deuda en el saldo)</option>
                <option value="ganancia_gasto">üí∞ Pago ganancia mensual Q2,000 (registrar como gasto)</option>
              </select>
            </div>
            
            <div class="mb-4">
              <label class="label-form">Monto</label>
              <input v-model.number="formDonEduardo.monto" 
                     type="number" step="0.01" 
                     class="input-primary" 
                     placeholder="0.00" required />
            </div>
            
            <div class="mb-4">
              <label class="label-form">Descripci√≥n</label>
              <input v-model="formDonEduardo.descripcion" 
                     class="input-primary" 
                     placeholder="Detalle del movimiento..." required />
            </div>
            
            <div class="mb-6">
              <label class="label-form">Fecha</label>
              <input v-model="formDonEduardo.fecha" 
                     type="date" 
                     class="input-primary date-input" required />
            </div>
            
            <div class="flex justify-end space-x-3">
              <button type="button" @click="cerrarModalDonEduardo" class="btn-secondary">Cancelar</button>
              <button type="submit" class="btn-primary tech-btn relative overflow-hidden" :disabled="guardando">
                <span class="z-10 relative">{{ guardando ? 'Guardando...' : 'Registrar' }}</span>
                <span class="tech-btn-bg absolute inset-0"></span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </Transition>

    <!-- Modal Movimientos Generales -->
    <Transition name="modal-fade">
      <div v-if="mostrarModalMovimiento" class="modal-backdrop">
        <div class="modal-content max-w-md">
          <div class="modal-header">
            <h3 class="modal-title">{{ tipoMovimientoActual === 'ingreso' ? 'Registrar Ingreso' : 'Registrar Gasto' }}</h3>
            <button @click="cerrarModalMovimiento" class="modal-close-btn">&times;</button>
          </div>
          <form @submit.prevent="registrarMovimiento" class="p-6">
            <div class="mb-4">
              <label class="label-form">Descripci√≥n</label>
              <input v-model="formMovimiento.descripcion" 
                     class="input-primary" 
                     placeholder="Detalle del movimiento..." required />
            </div>
            
            <div class="mb-4">
              <label class="label-form">Categor√≠a</label>
              <select v-model="formMovimiento.categoria" class="input-primary select-input" required>
                <option value="">Seleccionar categor√≠a...</option>
                <option v-for="categoria in categoriasPorTipo" :key="categoria.nombre" :value="categoria.nombre">
                  {{ categoria.icono }} {{ categoria.nombre }}
                </option>
              </select>
              <button type="button" 
                      @click="abrirModalNuevaCategoria(tipoMovimientoActual)" 
                      class="mt-2 text-xs text-purple-400 hover:text-purple-300 flex items-center transition-colors">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
                Agregar nueva categor√≠a
              </button>
            </div>
            
            <div class="mb-4">
              <label class="label-form">Monto</label>
              <input v-model.number="formMovimiento.monto" 
                     type="number" step="0.01" 
                     class="input-primary" 
                     placeholder="0.00" required />
            </div>
            
            <div class="mb-4">
              <label class="label-form">Fecha</label>
              <input v-model="formMovimiento.fecha" 
                     type="date" 
                     class="input-primary date-input" required />
            </div>
            
            <!-- Opciones para gastos e ingresos -->
            <div v-if="tipoMovimientoActual === 'gasto'" class="mb-6">
              <label class="flex items-center cursor-pointer">
                <input v-model="formMovimiento.agregarADonEduardo" 
                       type="checkbox" 
                       class="sr-only" />
                <div class="relative">
                  <div class="block bg-purple-700 w-14 h-8 rounded-full"></div>
                  <div :class="['absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition', 
                               formMovimiento.agregarADonEduardo ? 'transform translate-x-full bg-emerald-500' : '']"></div>
                </div>
                <div class="ml-3 text-white">
                  <span class="text-sm font-medium">üí≥ Agregar al saldo de Don Eduardo</span>
                  <p class="text-xs text-purple-300">Este gasto ser√° financiado por Don Eduardo</p>
                </div>
              </label>
            </div>

            <!-- Opciones para ingresos -->
            <div v-if="tipoMovimientoActual === 'ingreso'" class="mb-6">
